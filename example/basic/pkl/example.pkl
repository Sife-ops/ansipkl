module example

import "@ansipkl/AnsibleBuiltin.pkl"
import "@ansipkl/CommunityGeneral.pkl"
import "@ansipkl/Playbook.pkl"

pb0 = new Listing<Playbook.Play> {
    new {
        name = "play00"
        hosts = "self"
        remote_user = "root"

        tasks = Playbook.Tasks(new Listing {

            new AnsibleBuiltin.Apt {
                name = "install firefox"
                options {
                    name {
                        "firefox"
                    }
                }
            }

            new AnsibleBuiltin.Apt {
                name = "install vim"
                options {
                    name {
                        "vim"
                    }
                }
            }

        })
    }
}

pb1 = new Listing<Playbook.Play> {
    new {
        name = "play01"
        hosts = "self"
        remote_user = "root"

        tasks = Playbook.Tasks(new Listing {

            new AnsibleBuiltin.SetFact {
                name = "set hasProfile"
                options_mixin {
                    hasProfile = "yeahno"
                }
            }

            new AnsibleBuiltin.Debug {
                name = "debug hasProfile"
                options {
                    var = "hasProfile"
                }
            }

        })
    }
}

pb2 = new Listing<Playbook.Play> {
    new {
        name = "play02"
        hosts = "self"
        remote_user = "root"

        tasks = Playbook.Tasks(new Listing {

            new CommunityGeneral.Pacman {
                name = "install thunderbird"
                options {
                    name {
                        "thunderbird"
                    }
                }
            }

        })
    }
}
