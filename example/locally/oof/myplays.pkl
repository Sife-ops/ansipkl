import "@ansipkl/playbook.pkl"
import "@ansipkl/builtin.pkl"
import "@ansipkl/community.general.pkl"

playbook_a = new Listing<playbook.play> {
    new {
        name = "play1"
        hosts = "self"
        remote_user = "root"
        gather_facts = false
        tasks {
            new builtin.apt {
                name = "rg"
                options {
                    state = "present"
                    name {
                        "rg"
                    }
                }
            }.into()
        }
    }
    new {
        name = "play2"
        hosts = "self"
        remote_user = "root"
        tasks {
            new `community.general`.pacman {
                name = "nano"
                options {
                    name {
                        "nano"
                    }
                }
            }.into()

            new builtin.apt {
                name = "vim"
                options {
                    name {
                        "vim"
                    }
                }
                loop = "{{ realvar }}"
            }.into()
        }
    }
}

playbook_b = new Listing<playbook.play> {
    new {
        name = "play3"
        hosts = "self"
        remote_user = "root"
        environment {
            ["ppl"] = "u&me"
        }
        tasks {
            new `community.general`.pacman {
                name = "mpv"
                options {
                    name {
                        "mpv"
                    }
                }
            }.into()
        }
    }
}

